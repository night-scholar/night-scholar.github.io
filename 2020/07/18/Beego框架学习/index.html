<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Night Scholar">





<title>Beego框架学习 | Hexo</title>



    <link rel="icon" href="/avatar.jpeg">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">夜行书生&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">文章</a>
                
                    <a class="menu-item" href="/category">分类</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">夜行书生&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">文章</a>
                
                    <a class="menu-item" href="/category">分类</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
        
            <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">全部展开</a>
        <a onclick="go_top()">回到首部</a>
        <a onclick="go_bottom()">直达底部</a>
    </div>
</div>

<script>
    document.ready(
        function() {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "全部折叠"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "全部展开"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }
</script>
                

                    
                        <article class="post-wrap">
                            <header class="post-header">
                                <h1 class="post-title">
                                    Beego框架学习
                                </h1>
                                
                                    <div class="post-meta">
                                        
                                            Author:
                                            <a itemprop="author" rel="author" href="/">
                                                Night Scholar
                                            </a>
                                            

                                                
                                                    <span class="post-time">
                        Date: <a href="#">July 18, 2020&nbsp;&nbsp;15:31:02</a>
                        </span>
                                                    
                                                        
                                                            <span class="post-category">
                    Category:
                            
                                <a href="/categories/%E6%A1%86%E6%9E%B6/">框架</a>
                            
                        </span>
                                                            
                                    </div>
                                    
                            </header>

                            <div class="post-content">
                                <h1 id="Beego框架学习"><a href="#Beego框架学习" class="headerlink" title="Beego框架学习"></a>Beego框架学习</h1><p>beego框架是go语言开发的web框架</p>
<p>官网：beego.me</p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. bee new &quot;项目名称&quot;  #在GOPATH/src下创建</span><br><span class="line">2. bee run  #进入项目目录执行</span><br><span class="line">3. 使用GOLand打开文件  #若使用了代理下载Beego和bee，需要Go环境配置，我配置的是https://goproxy.io/</span><br></pre></td></tr></table></figure>



<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>M：Model模型，数据库操作、增删改查</p>
<p>V：View视图，接受C传输的数据、组织html界面</p>
<p>C：Controller控制器，接收数据、数据处理、传输数据给M和V并接收应答、返回应答给浏览器</p>
<ol>
<li>浏览器请求到控制器</li>
<li>控制器想Model要数据</li>
<li>控制器得到数据后将数据给View，并向View获取视图</li>
<li>控制器得到视图后将其传递给浏览器</li>
</ol>
<h2 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h2><p>beego中内嵌了ORM框架，可以将结构体和数据表进行对应，只需要通过结构体和对象就可以对数据表进行操作</p>
<p>O：Object对象</p>
<p>R：Relation关系，对应关系型数据库</p>
<p>M：Mapping映射</p>
<ol>
<li>能够通过结构体对象来操作对应的数据库表</li>
<li>能通过ORM生成结构体相对应的数据库表</li>
</ol>
<h3 id="orm表创建过程"><a href="#orm表创建过程" class="headerlink" title="orm表创建过程"></a>orm表创建过程</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span> <span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">// 设置数据库基本信息</span></span><br><span class="line">	orm.RegisterDataBase(<span class="string">&quot;default&quot;</span><span class="comment">/*数据库别名*/</span>, <span class="string">&quot;mysql&quot;</span><span class="comment">/*数据库名称*/</span>, <span class="string">&quot;root:@tcp(127.0.0.1:3306)/test1?charset=utf8mb4&quot;</span>)</span><br><span class="line">	<span class="comment">// 映射model数据</span></span><br><span class="line">	orm.RegisterModel(<span class="built_in">new</span>(User))</span><br><span class="line">	<span class="comment">// 生成表</span></span><br><span class="line">	orm.RunSyncdb(<span class="string">&quot;default&quot;</span>, <span class="literal">false</span><span class="comment">/*是否强制更新*/</span>, <span class="literal">true</span><span class="comment">/*是否可见*/</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="orm插入"><a href="#orm插入" class="headerlink" title="orm插入"></a>orm插入</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入</span></span><br><span class="line"><span class="comment">//1. 有ORM对象</span></span><br><span class="line">o:=orm.NewOrm()</span><br><span class="line"><span class="comment">//2. 有插入数据的结构体对象</span></span><br><span class="line">user:=models.User&#123;&#125;</span><br><span class="line"><span class="comment">//3. 对结构体对象赋值</span></span><br><span class="line">user.Name=<span class="string">&quot;夜行书生&quot;</span></span><br><span class="line">user.Pwd=<span class="string">&quot;yexingshusheng&quot;</span></span><br><span class="line"><span class="comment">//4. 插入</span></span><br><span class="line">_,err:=o.Insert(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">	beego.Info(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="orm查询"><a href="#orm查询" class="headerlink" title="orm查询"></a>orm查询</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询</span></span><br><span class="line"><span class="comment">//1. 有ORM对象</span></span><br><span class="line">o:=orm.NewOrm()</span><br><span class="line"><span class="comment">//2. 有查询的对象</span></span><br><span class="line">user:=models.User&#123;&#125;</span><br><span class="line"><span class="comment">//3. 指定查询对象字段值</span></span><br><span class="line">user.Id = <span class="number">1</span></span><br><span class="line"><span class="comment">//4. 进行查询</span></span><br><span class="line">err:=o.Read(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">	beego.Info(err)</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="orm更新"><a href="#orm更新" class="headerlink" title="orm更新"></a>orm更新</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新</span></span><br><span class="line"><span class="comment">//1. 有ORM对象</span></span><br><span class="line">o:=orm.NewOrm()</span><br><span class="line"><span class="comment">//2. 有需要更新的对象</span></span><br><span class="line">user:=models.User&#123;&#125;</span><br><span class="line"><span class="comment">//3. 有需要更新的数据</span></span><br><span class="line">user.Id = <span class="number">1</span></span><br><span class="line">err:=o.Read(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">	beego.Info(err)</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//4. 重新赋值</span></span><br><span class="line">user.Name = <span class="string">&quot;夜行书生1&quot;</span></span><br><span class="line">_,err = o.Update(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">	beego.Info(err)</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="orm删除"><a href="#orm删除" class="headerlink" title="orm删除"></a>orm删除</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除</span></span><br><span class="line"><span class="comment">//1. 有ORM对象</span></span><br><span class="line">o:=orm.NewOrm()</span><br><span class="line"><span class="comment">//2. 有需要删除的对象</span></span><br><span class="line">user:=models.User&#123;&#125;</span><br><span class="line"><span class="comment">//3. 有需要删除的数据</span></span><br><span class="line">user.Id = <span class="number">1</span></span><br><span class="line"><span class="comment">//4. 删除数据</span></span><br><span class="line">_,err:=o.Delete(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">	beego.Info(err)</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="表属性设置"><a href="#表属性设置" class="headerlink" title="表属性设置"></a>表属性设置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">设置主键 `pk`</span><br><span class="line">设置自增`auto`</span><br><span class="line">当 Field 类型为 int, int32, int64, uint, uint32, uint64 时，可以设置字段为自增健,当模型定义里没有主键时，符合上述类型且名称为 Id 的 Field 将被视为自增健.</span><br><span class="line">设置默认值 `default(11)`</span><br><span class="line">设置长度`orm:size(100)`</span><br><span class="line">设置允许为空`null`，数据库默认是非空，设置null之后就可以变为`ALLOW NULL`</span><br><span class="line">设置唯一`orm:&quot;unique&quot;`</span><br><span class="line">设置浮点数精度`orm:&quot;digits(12);decimals(4)&quot;`  总共12位，四位是小数位</span><br><span class="line">设置时间：`orm:&quot;auto_now_add;type(datetime)&quot;`</span><br><span class="line">		`orm:&quot;auto_now;type(date)&quot;`</span><br><span class="line">auto_now 每次 model 保存时都会对时间自动更新</span><br><span class="line">auto_now_add 第一次保存时才设置时间</span><br><span class="line">设置时间的格式：type</span><br></pre></td></tr></table></figure>



<h2 id="GET请求和POST请求"><a href="#GET请求和POST请求" class="headerlink" title="GET请求和POST请求"></a>GET请求和POST请求</h2><h3 id="GET请求"><a href="#GET请求" class="headerlink" title="GET请求"></a>GET请求</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 添加要实现的路由在router.go</span><br><span class="line">2. 重写get方法</span><br><span class="line">3. 返回一个视图</span><br></pre></td></tr></table></figure>

<h3 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 用form表单发送post请求</span><br><span class="line">2. 在router.go中实现对应路由</span><br><span class="line">3. 重写post方法</span><br><span class="line">4. 返回一个视图</span><br></pre></td></tr></table></figure>

<h3 id="注册登录简单实现"><a href="#注册登录简单实现" class="headerlink" title="注册登录简单实现"></a>注册登录简单实现</h3><p>router路由定义</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    beego.Router(<span class="string">&quot;/register&quot;</span>,&amp;controllers.MainController&#123;&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//自定义了get请求方法，请求将不会访问默认方法</span></span><br><span class="line">	beego.Router(<span class="string">&quot;/login&quot;</span>,&amp;controllers.MainController&#123;&#125;,<span class="string">&quot;get:Login;post:HandleLogin&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注册登录html实现</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册页面<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/register&quot;</span>&gt;</span></span><br><span class="line">       用户名 : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">       密码 : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--登录同理--&gt;</span></span><br></pre></td></tr></table></figure>

<p>注册</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *MainController)</span> <span class="title">Get</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c.TplName = <span class="string">&quot;register.html&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *MainController)</span> <span class="title">Post</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//1. 拿到数据</span></span><br><span class="line">	username:=c.GetString(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password:=c.GetString(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">	<span class="comment">//2. 对数据进行校验</span></span><br><span class="line">	<span class="keyword">if</span> username == <span class="string">&quot;&quot;</span> || password == <span class="string">&quot;&quot;</span>&#123;</span><br><span class="line">		<span class="comment">//重定向</span></span><br><span class="line">		c.Redirect(<span class="string">&quot;/register&quot;</span>,<span class="number">302</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//3. 插入数据库</span></span><br><span class="line">	o:=orm.NewOrm()</span><br><span class="line">	user:=models.User&#123;</span><br><span class="line">		Name: username,</span><br><span class="line">		Pwd:  password,</span><br><span class="line">	&#125;</span><br><span class="line">	_,err:=o.Insert(&amp;user)</span><br><span class="line">	<span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">		<span class="comment">//重定向</span></span><br><span class="line">		c.Redirect(<span class="string">&quot;/register&quot;</span>,<span class="number">302</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//4. 返回登录界面</span></span><br><span class="line">	c.TplName = <span class="string">&quot;login.html&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>登录</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *MainController)</span> <span class="title">Login</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	c.TplName = <span class="string">&quot;login.html&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *MainController)</span> <span class="title">HandleLogin</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">//1. 拿到数据</span></span><br><span class="line">	username := c.GetString(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.GetString(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">	<span class="comment">//2. 校验数据</span></span><br><span class="line">	<span class="keyword">if</span> username == <span class="string">&quot;&quot;</span> || password == <span class="string">&quot;&quot;</span>&#123;</span><br><span class="line">		<span class="comment">//重定向</span></span><br><span class="line">		c.Redirect(<span class="string">&quot;/login&quot;</span>,<span class="number">302</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//3. 校验数据库</span></span><br><span class="line">	o:=orm.NewOrm()</span><br><span class="line">	user:=models.User&#123;&#125;</span><br><span class="line">	user.Name = username</span><br><span class="line">	user.Pwd = password</span><br><span class="line">	err := o.Read(&amp;user,<span class="string">&quot;Name&quot;</span>,<span class="string">&quot;Pwd&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//重定向</span></span><br><span class="line">		c.Redirect(<span class="string">&quot;/login&quot;</span>,<span class="number">302</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	c.Ctx.WriteString(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="c-TplName和c-Redirect的区别"><a href="#c-TplName和c-Redirect的区别" class="headerlink" title="c.TplName和c.Redirect的区别"></a>c.TplName和c.Redirect的区别</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c.TplName(&quot;视图文件&quot;)可以指定试图文件，同时给这个视图用c.Data传递一些数据</span><br><span class="line">c.Redirect(&quot;URL地址&quot;,HTTP状态码)是跳转，不能传递数据，速度快</span><br></pre></td></tr></table></figure>




                            </div>

                            
                                <section class="post-copyright">
                                    
                                            
                                                    
                                                            

                                </section>
                                
                                    <section class="post-tags">
                                        <div>
                                            <span>标签:</span>
                                            <span class="tag">
                    
                    
                        <a href="/tags/Go%E8%AF%AD%E8%A8%80/"># Go语言</a>
                    
                        
                </span>
                                        </div>
                                        <div>
                                            <a href="javascript:window.history.back();">back</a>
                                            <span>· </span>
                                            <a href="/">home</a>
                                        </div>
                                    </section>
                                    <section class="post-nav">
                                        
                                            <a class="prev" rel="prev" href="/2020/09/09/GO%E8%AF%AD%E8%A8%80%E5%AF%86%E7%A0%81%E5%AD%A6/">
                                                Go语言密码学
                                            </a>
                                            
                                                
                                                    <a class="next" rel="next" href="/2020/06/05/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                                        Redis数据库
                                                    </a>
                                                    
                                    </section>


                        </article>
</div>
        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Night Scholar | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
